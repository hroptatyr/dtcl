language: c

sudo: false

compiler:
  - gcc
  - gcc-5
  - gcc-6
  - gcc-7

before_script:
  - autoreconf -vfi

script:
  - ./configure || { cat config.log; false; }
  - make clean all check || { cat test/test-suite.log; false; }
  - make distcheck

## whitelist
branches:
  only:
    - master
    - next

notifications:
  email:
    - devel@fresse.org

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - gcc-5
      - gcc-6
      - gcc-7
